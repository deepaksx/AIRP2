<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Account Balances - AIRP v2.0</title><link rel="stylesheet" href="styles/sap-design-system.css"></head><body>
<div class="page-header"><div class="header-top"><div><div class="page-title">Account Balances</div><div class="page-subtitle">Summary of account balances by account code</div></div><div class="header-actions"><button class="btn btn-secondary" onclick="loadData()">üîÑ Refresh</button></div></div></div>
<div class="content"><div id="error-alert" class="alert error" style="display: none;"></div><div class="report-card"><div class="report-header"><div class="report-title">Account Balances Summary</div><div class="report-date">As of <span id="report-date">...</span></div></div><table class="report-table"><thead><tr><th style="width: 100px;">Account Code</th><th>Account Name</th><th style="width: 100px;">Type</th><th style="width: 150px;" class="text-right">Balance (AED)</th></tr></thead><tbody id="data-tbody"><tr><td colspan="4" class="loading"><div class="spinner"></div><div>Loading account balances...</div></td></tr></tbody></table></div></div>
<script>
const URL='http://localhost:3008',TID='00000000-0000-0000-0000-000000000001';
document.addEventListener('DOMContentLoaded',()=>{loadData();});
async function loadData(){const t=document.getElementById('data-tbody'),e=document.getElementById('error-alert');t.innerHTML='<tr><td colspan="4" class="loading"><div class="spinner"></div><div>Loading...</div></td></tr>';e.style.display='none';try{const r=await fetch(`${URL}/reports/account-balances?tenant_id=${TID}`);if(!r.ok)throw new Error(`HTTP ${r.status}`);const d=await r.json();document.getElementById('report-date').textContent=new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});renderData(d.accounts||[]);}catch(err){t.innerHTML='<tr><td colspan="4" class="empty-state"><div class="empty-state-icon">‚ö†Ô∏è</div><div><strong>Failed to load</strong></div></td></tr>';e.textContent=`Error: ${err.message}`;e.style.display='block';}}
function renderData(items){const t=document.getElementById('data-tbody');if(!items.length){t.innerHTML='<tr><td colspan="4" class="empty-state"><div class="empty-state-icon">üí∞</div><div>No accounts found</div></td></tr>';return;}let h='';items.forEach(i=>{const bal=parseFloat(i.net_balance||i.balance||0);h+=`<tr><td class="text-bold">${i.account_code}</td><td>${i.account_name}</td><td>${i.account_type||'-'}</td><td class="text-right ${bal>0?'amount-positive':bal<0?'amount-negative':''}">${bal.toLocaleString('en-AE',{minimumFractionDigits:2})}</td></tr>`;});t.innerHTML=h;}
</script>
</body></html>
