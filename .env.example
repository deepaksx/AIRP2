# AIRP v2.0 Environment Configuration Template
# Copy to .env and fill in actual values

# ============================================
# GENERAL
# ============================================
NODE_ENV=development
TZ=Asia/Dubai
LOG_LEVEL=info

# ============================================
# DATABASE
# ============================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=airp_admin
POSTGRES_PASSWORD=changeme_secure_password
POSTGRES_DB=airp_master
# Connection pool
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_IDLE_TIMEOUT=10000

# ============================================
# EVENT BUS (Kafka/Redpanda)
# ============================================
KAFKA_BROKERS=kafka:9092
KAFKA_CLIENT_ID=airp-v2
KAFKA_GROUP_ID=airp-consumers
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=
# Exactly-once semantics
KAFKA_ENABLE_IDEMPOTENCE=true
KAFKA_TRANSACTIONAL_ID=airp-transactions

# ============================================
# CACHE & SESSION
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ============================================
# AUTHENTICATION & AUTHORIZATION
# ============================================
KEYCLOAK_URL=http://keycloak:8080
KEYCLOAK_REALM=airp
KEYCLOAK_CLIENT_ID=airp-backend
KEYCLOAK_CLIENT_SECRET=changeme_keycloak_secret
JWT_SECRET=changeme_jwt_secret_min_32_chars_long
JWT_EXPIRATION=3600

# ============================================
# VECTOR DATABASE (Qdrant)
# ============================================
QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_POLICIES=ifrs_policies
QDRANT_COLLECTION_TRANSACTIONS=transaction_embeddings

# ============================================
# AI SERVICES - LLM PROVIDERS
# ============================================
# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4096

# Azure OpenAI (optional)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
AZURE_OPENAI_DEPLOYMENT=

# Model routing preference
AI_PROVIDER=anthropic  # openai | anthropic | azure | local
AI_FALLBACK_ENABLED=true

# ============================================
# ML MODELS
# ============================================
ML_MODEL_REGISTRY_URI=http://mlflow:5000
ML_FEATURE_STORE_URI=postgresql://postgres:5432/feature_store
# XGBoost GL Classifier
XGBOOST_MODEL_PATH=/models/gl_classifier_v1.pkl
XGBOOST_THRESHOLD=0.75
# Prophet Cash Forecast
PROPHET_MODEL_PATH=/models/cash_forecast_v1.pkl

# ============================================
# OBJECT STORAGE (MinIO / S3)
# ============================================
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_DOCUMENTS=airp-documents
S3_BUCKET_MODELS=airp-models
S3_REGION=us-east-1
S3_USE_SSL=false

# ============================================
# MONITORING & OBSERVABILITY
# ============================================
# Grafana
GRAFANA_URL=http://grafana:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Prometheus
PROMETHEUS_URL=http://prometheus:9090

# Jaeger
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# ============================================
# COMPLIANCE & REGION
# ============================================
DEFAULT_TIMEZONE=Asia/Dubai
BASE_CURRENCY=AED
DEFAULT_LOCALE=en-AE
ACCOUNTING_STANDARD=IFRS  # IFRS | GAAP
VAT_RATE=0.05
VAT_JURISDICTION=UAE

# ZATCA (Saudi Arabia) Integration
ZATCA_ENABLED=false
ZATCA_API_URL=https://sandbox.zatca.gov.sa
ZATCA_CERTIFICATE_PATH=

# EFRIS (Uganda) Integration
EFRIS_ENABLED=false
EFRIS_API_URL=https://efris.ura.go.ug
EFRIS_TIN=

# ============================================
# SECURITY
# ============================================
# Encryption at rest (AES-256)
ENCRYPTION_KEY=changeme_32_byte_encryption_key_here
ENCRYPTION_ALGORITHM=aes-256-gcm

# Audit trail retention (days)
AUDIT_RETENTION_DAYS=2555  # 7 years

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# BUSINESS RULES
# ============================================
# Approval thresholds (AED)
APPROVAL_THRESHOLD_L1=10000
APPROVAL_THRESHOLD_L2=100000
APPROVAL_THRESHOLD_L3=500000

# Close schedule
CLOSE_DAY_OF_MONTH=5
CLOSE_HARD_DEADLINE_DAY=10

# Aging buckets (days)
AGING_BUCKET_1=30
AGING_BUCKET_2=60
AGING_BUCKET_3=90
AGING_BUCKET_4=120

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_AI_AUTO_ACCOUNTING=true
FEATURE_AUTONOMOUS_RECON=true
FEATURE_PREDICTIVE_CLOSE=true
FEATURE_NARRATIVE_REPORTING=true
FEATURE_CONTINUOUS_AUDIT=false
FEATURE_SYNTHETIC_DATA_GEN=true

# ============================================
# API GATEWAY
# ============================================
API_GATEWAY_PORT=3000
API_GATEWAY_CORS_ORIGIN=http://localhost:3001

# ============================================
# SERVICE PORTS (Internal)
# ============================================
LEDGER_WRITER_PORT=3001
PROJECTION_SERVICE_PORT=3002
AP_SERVICE_PORT=3003
AR_SERVICE_PORT=3004
TREASURY_SERVICE_PORT=3005
FPNA_SERVICE_PORT=3006
POLICY_ENGINE_PORT=3007
REPORTING_SERVICE_PORT=3008

AI_AUTO_ACCOUNTING_PORT=8001
AI_RECON_PORT=8002
AI_FORECAST_PORT=8003
AI_NARRATIVE_PORT=8004
AI_POLICY_ADVISOR_PORT=8005

# ============================================
# SLO TARGETS
# ============================================
SLO_P99_READ_MS=300
SLO_P99_WRITE_MS=800
SLO_UPTIME_PERCENT=99.9
RPO_MINUTES=15
RTO_MINUTES=60
